!function(){"use strict";class s{constructor(s,e){this.container=s,this.options=Object.assign({imageSelector:".shopBullet_images img",activeClass:"active",dotSelector:".shopBullet_dot",lazyLoad:!0,bulletHover:"red",placeholderSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",overlaySelector:".shopBullet_overlay",overlayActiveClass:"active"},e),this.addDots(),this.addPreloader(),this.images=Array.from(s.querySelectorAll(this.options.imageSelector)),this.dots=Array.from(s.querySelectorAll(this.options.dotSelector)),this.overlay=s.querySelector(this.options.overlaySelector),this.currentIndex=0,this.init()}init(){this.addPlaceholders(),this.setupDots(),this.setupImages(),this.options.lazyLoad&&this.setupLazyLoading(),this.resizeListener()}addPlaceholders(){this.images.forEach((s,e)=>{s.src=this.options.placeholderSrc})}getDeviceType(){const s=window.innerWidth;return s>=1024?"desktop":s>=576?"tablet":"mobile"}setupImages(){const s=this.getDeviceType();this.images.forEach((e,t)=>{if(0===t){e.classList.add(this.options.activeClass);const t=e.dataset[`src_${s}`]||e.dataset.src;t&&(e.src=t)}else if(e.classList.remove(this.options.activeClass),this.options.lazyLoad&&e.src===this.options.placeholderSrc){const t=e.dataset[`src_${s}`]||e.dataset.src;t&&(e.src=t)}})}setupDots(){this.dots.forEach((s,e)=>{s.addEventListener("mouseenter",()=>{this.showImage(e)}),s.addEventListener("mouseleave",()=>{this.hideOverlay(e)})})}resizeListener(){window.addEventListener("resize",()=>{this.setupImages()})}showImage(s){if(s<0||s>=this.images.length)return;const e=this.getDeviceType();if(this.images.forEach((t,i)=>{if(t.classList.toggle(this.options.activeClass,i===s),i===s){const s=t.dataset[`src_${e}`]||t.dataset.src;s&&(t.src=s)}}),this.dots.forEach((e,t)=>{e.classList.toggle(this.options.activeClass,t===s)}),this.currentIndex=s,this.options.lazyLoad){const t=this.images[s],i=t.dataset[`src_${e}`]||t.dataset.src;(!t.src||t.src===this.options.placeholderSrc&&i)&&(t.src=i)}s===this.images.length-1&&this.overlay?this.overlay.classList.add(this.options.overlayActiveClass):this.overlay&&this.overlay.classList.remove(this.options.overlayActiveClass)}hideOverlay(s){this.overlay.classList.remove(this.options.overlayActiveClass)}setupLazyLoading(){const s=this.getDeviceType();if("IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const i=e.target,o=i.dataset[`src_${s}`]||i.dataset.src;(!i.src||i.src===this.options.placeholderSrc&&o)&&(i.src=o,t.unobserve(i))}})},{rootMargin:"50px"});this.images.forEach(t=>{const i=t.dataset[`src_${s}`]||t.dataset.src;(!t.src||t.src===this.options.placeholderSrc&&i)&&e.observe(t)})}}addDots(){let s="";this.options.bulletHover&&(s=`style='--bullet-hover:${this.options.bulletHover}'`);let e=`<div class="shopBullet_dots" ${s}>`,t=this.container.querySelectorAll(".shopBullet_images img").length;if(t){if(1==t)e+='<span class="shopBullet_dot active" data-index="0"></span>';else if(t>1){let s="";for(let e=1;e<t;e++)s+=`<span class="shopBullet_dot" data-index="${e}"></span>`;e+=`<span class="shopBullet_dot active" data-index="0"></span>${s}`}e+="</div>",this.container.children[1].insertAdjacentHTML("beforebegin",e)}}addPreloader(){this.container.children[1].insertAdjacentHTML("beforebegin",'       \n        <div class="shopBullet_preloader">\n        <span class="shopBullet_preloader-body"></span>\n        </div>')}}document.querySelectorAll(".shopBullet").forEach(e=>{new s(e,{lazyLoad:!0,bulletHover:"red"})})}();